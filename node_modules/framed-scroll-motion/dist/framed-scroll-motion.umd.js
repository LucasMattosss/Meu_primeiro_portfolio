!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["framed-scroll-motion"]={},t.React)}(this,(function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n={exports:{}},o={},s=r(e).default,i=Symbol.for("react.element"),u=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,r){var n,o={},s=null,u=null;for(n in void 0!==r&&(s=""+r),void 0!==e.key&&(s=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,n)&&!f.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:s,ref:u,props:o,_owner:c.current}}o.Fragment=u,o.jsx=l,o.jsxs=l,n.exports=o;const p=n.exports.jsx,d={width:null,height:null},h=e.createContext(d);function m(){return e.useContext(h)}const y="undefined"!=typeof window?e.useLayoutEffect:e.useEffect;function g(t=[0,1]){const r=m(),n=e.useRef(null),[o,s]=e.useState(t);return y((()=>{if(!n.current)return;const e=n.current.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,o=e.top+r-window.innerHeight,i=document.body.clientHeight-window.innerHeight,u=t.map((t=>(o+(window.innerHeight+e.height)*t)/i));s(u)}),[r]),[n,o]}var v=function(){return v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},v.apply(this,arguments)};function b(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,s=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}var w=e.createContext({transformPagePoint:function(t){return t},isStatic:!1,reducedMotion:"never"}),O="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;function S(t){var r=e.useRef(null);return null===r.current&&(r.current=t()),r.current}const x=1/60*1e3,A="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),j="undefined"!=typeof window?t=>window.requestAnimationFrame(t):t=>setTimeout((()=>t(A())),x);let E=!0,M=!1,P=!1;const R={delta:0,timestamp:0},_=["read","update","preRender","render","postRender"],C=_.reduce(((t,e)=>(t[e]=function(t){let e=[],r=[],n=0,o=!1,s=!1;const i=new WeakSet,u={schedule:(t,s=!1,u=!1)=>{const a=u&&o,c=a?e:r;return s&&i.add(t),-1===c.indexOf(t)&&(c.push(t),a&&o&&(n=e.length)),t},cancel:t=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1),i.delete(t)},process:a=>{if(o)s=!0;else{if(o=!0,[e,r]=[r,e],r.length=0,n=e.length,n)for(let r=0;r<n;r++){const n=e[r];n(a),i.has(n)&&(u.schedule(n),t())}o=!1,s&&(s=!1,u.process(a))}}};return u}((()=>M=!0)),t)),{}),F=_.reduce(((t,e)=>{const r=C[e];return t[e]=(t,e=!1,n=!1)=>(M||T(),r.schedule(t,e,n)),t}),{});_.reduce(((t,e)=>(t[e]=C[e].cancel,t)),{}),_.reduce(((t,e)=>(t[e]=()=>C[e].process(R),t)),{});const N=t=>C[t].process(R),k=t=>{M=!1,R.delta=E?x:Math.max(Math.min(t-R.timestamp,40),1),R.timestamp=t,P=!0,_.forEach(N),P=!1,M&&(E=!1,j(k))},T=()=>{M=!0,E=!0,P||j(k)},L=(t,e,r)=>{const n=e-t;return 0===n?1:(r-t)/n},H=(t,e,r)=>-r*t+r*e+t,U=(t,e)=>r=>Math.max(Math.min(r,e),t),V=t=>t%1?Number(t.toFixed(5)):t,Y=/(-)?([\d]*\.?[\d])+/g,$=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,W=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function I(t){return"string"==typeof t}const z={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},B=Object.assign(Object.assign({},z),{transform:U(0,1)});Object.assign(Object.assign({},z),{default:1});const D=(X="%",{test:t=>I(t)&&t.endsWith(X)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${X}`});var X;Object.assign(Object.assign({},D),{parse:t=>D.parse(t)/100,transform:t=>D.transform(100*t)});const q=(t,e)=>r=>Boolean(I(r)&&W.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),G=(t,e,r)=>n=>{if(!I(n))return n;const[o,s,i,u]=n.match(Y);return{[t]:parseFloat(o),[e]:parseFloat(s),[r]:parseFloat(i),alpha:void 0!==u?parseFloat(u):1}},J={test:q("hsl","hue"),parse:G("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+D.transform(V(e))+", "+D.transform(V(r))+", "+V(B.transform(n))+")"},K=U(0,255),Q=Object.assign(Object.assign({},z),{transform:t=>Math.round(K(t))}),Z={test:q("rgb","red"),parse:G("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Q.transform(t)+", "+Q.transform(e)+", "+Q.transform(r)+", "+V(B.transform(n))+")"};const tt={test:q("#"),parse:function(t){let e="",r="",n="",o="";return t.length>5?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2),o=t.substr(7,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),o=t.substr(4,1),e+=e,r+=r,n+=n,o+=o),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}},transform:Z.transform},et=t=>Z.test(t)||tt.test(t)||J.test(t),rt=t=>Z.test(t)?Z.parse(t):J.test(t)?J.parse(t):tt.parse(t),nt=t=>I(t)?t:t.hasOwnProperty("red")?Z.transform(t):J.transform(t),ot="${c}",st="${n}";function it(t){"number"==typeof t&&(t=`${t}`);const e=[];let r=0;const n=t.match($);n&&(r=n.length,t=t.replace($,ot),e.push(...n.map(rt)));const o=t.match(Y);return o&&(t=t.replace(Y,st),e.push(...o.map(z.parse))),{values:e,numColors:r,tokenised:t}}function ut(t){return it(t).values}function at(t){const{values:e,numColors:r,tokenised:n}=it(t),o=e.length;return t=>{let e=n;for(let n=0;n<o;n++)e=e.replace(n<r?ot:st,n<r?nt(t[n]):V(t[n]));return e}}const ct=t=>"number"==typeof t?0:t;const ft={test:function(t){var e,r,n,o;return isNaN(t)&&I(t)&&(null!==(r=null===(e=t.match(Y))||void 0===e?void 0:e.length)&&void 0!==r?r:0)+(null!==(o=null===(n=t.match($))||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0},parse:ut,createTransformer:at,getAnimatableNone:function(t){const e=ut(t);return at(t)(e.map(ct))}};function lt(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function pt({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,r/=100;let o=0,s=0,i=0;if(e/=100){const n=r<.5?r*(1+e):r+e-r*e,u=2*r-n;o=lt(u,n,t+1/3),s=lt(u,n,t),i=lt(u,n,t-1/3)}else o=s=i=r;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*i),alpha:n}}const dt=(t,e,r)=>{const n=t*t,o=e*e;return Math.sqrt(Math.max(0,r*(o-n)+n))},ht=[tt,Z,J],mt=t=>ht.find((e=>e.test(t))),yt=(t,e)=>{let r=mt(t),n=mt(e),o=r.parse(t),s=n.parse(e);r===J&&(o=pt(o),r=Z),n===J&&(s=pt(s),n=Z);const i=Object.assign({},o);return t=>{for(const e in i)"alpha"!==e&&(i[e]=dt(o[e],s[e],t));return i.alpha=H(o.alpha,s.alpha,t),r.transform(i)}},gt=(t,e)=>r=>e(t(r)),vt=(...t)=>t.reduce(gt);function bt(t,e){return"number"==typeof t?r=>H(t,e,r):et(t)?yt(t,e):xt(t,e)}const wt=(t,e)=>{const r=[...t],n=r.length,o=t.map(((t,r)=>bt(t,e[r])));return t=>{for(let e=0;e<n;e++)r[e]=o[e](t);return r}},Ot=(t,e)=>{const r=Object.assign(Object.assign({},t),e),n={};for(const o in r)void 0!==t[o]&&void 0!==e[o]&&(n[o]=bt(t[o],e[o]));return t=>{for(const e in n)r[e]=n[e](t);return r}};function St(t){const e=ft.parse(t),r=e.length;let n=0,o=0,s=0;for(let i=0;i<r;i++)n||"number"==typeof e[i]?n++:void 0!==e[i].hue?s++:o++;return{parsed:e,numNumbers:n,numRGB:o,numHSL:s}}const xt=(t,e)=>{const r=ft.createTransformer(e),n=St(t),o=St(e);return n.numHSL===o.numHSL&&n.numRGB===o.numRGB&&n.numNumbers>=o.numNumbers?vt(wt(n.parsed,o.parsed),r):r=>`${r>0?e:t}`},At=(t,e)=>r=>H(t,e,r);function jt(t,e,r){const n=[],o=r||("number"==typeof(s=t[0])?At:"string"==typeof s?et(s)?yt:xt:Array.isArray(s)?wt:"object"==typeof s?Ot:void 0);var s;const i=t.length-1;for(let u=0;u<i;u++){let r=o(t[u],t[u+1]);if(e){const t=Array.isArray(e)?e[u]:e;r=vt(t,r)}n.push(r)}return n}function Et(t,e,{clamp:r=!0,ease:n,mixer:o}={}){const s=t.length;e.length,!n||!Array.isArray(n)||n.length,t[0]>t[s-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const i=jt(e,n,o),u=2===s?function([t,e],[r]){return n=>r(L(t,e,n))}(t,i):function(t,e){const r=t.length,n=r-1;return o=>{let s=0,i=!1;if(o<=t[0]?i=!0:o>=t[n]&&(s=n-1,i=!0),!i){let e=1;for(;e<r&&!(t[e]>o||e===n);e++);s=e-1}const u=L(t[s],t[s+1],o);return e[s](u)}}(t,i);return r?e=>u(((t,e,r)=>Math.min(Math.max(r,t),e))(t[0],t[s-1],e)):u}var Mt=function(){function t(){this.subscriptions=[]}return t.prototype.add=function(t){var e,r,n=this;return e=this.subscriptions,r=t,-1===e.indexOf(r)&&e.push(r),function(){return function(t,e){var r=t.indexOf(e);r>-1&&t.splice(r,1)}(n.subscriptions,t)}},t.prototype.notify=function(t,e,r){var n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](t,e,r);else for(var o=0;o<n;o++){var s=this.subscriptions[o];s&&s(t,e,r)}},t.prototype.getSize=function(){return this.subscriptions.length},t.prototype.clear=function(){this.subscriptions.length=0},t}(),Pt=function(){function t(t){var e,r=this;this.version="6.3.15",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Mt,this.velocityUpdateSubscribers=new Mt,this.renderSubscribers=new Mt,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),r.prev=r.current,r.current=t;var n=R,o=n.delta,s=n.timestamp;r.lastUpdated!==s&&(r.timeDelta=o,r.lastUpdated=s,F.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.updateSubscribers.notify(r.current),r.velocityUpdateSubscribers.getSize()&&r.velocityUpdateSubscribers.notify(r.getVelocity()),e&&r.renderSubscribers.notify(r.current)},this.scheduleVelocityCheck=function(){return F.postRender(r.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==r.lastUpdated&&(r.prev=r.current,r.velocityUpdateSubscribers.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?(t=parseFloat(this.current)-parseFloat(this.prev),(e=this.timeDelta)?t*(1e3/e):0):0;var t,e},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(r){e.hasAnimated=!0,e.stopAnimation=t(r)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function Rt(t){return new Pt(t)}function _t(t,e,r,n){return void 0===n&&(n={passive:!0}),t.addEventListener(e,r,n),function(){return t.removeEventListener(e,r)}}var Ct,Ft=function(t){return function(t){return"object"==typeof t&&t.mix}(t)?t.mix:void 0};function Nt(t,r){var n=function(t){var r=S((function(){return Rt(t)}));if(e.useContext(w).isStatic){var n=b(e.useState(t),2)[1];e.useEffect((function(){return r.onChange(n)}),[])}return r}(r()),o=function(){return n.set(r())};return o(),function(t,r){e.useEffect((function(){var e=t.map((function(t){return t.onChange(r)}));return function(){return e.forEach((function(t){return t()}))}}))}(t,(function(){return F.update(o,!1,!0)})),n}function kt(t,e,r,n){var o="function"==typeof e?e:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=!Array.isArray(t[0]),n=r?0:-1,o=t[0+n],s=t[1+n],i=t[2+n],u=t[3+n],a=Et(s,i,v({mixer:Ft(i[0])},u));return r?a(o):a}(e,r,n);return Array.isArray(t)?Tt(t,o):Tt([t],(function(t){var e=b(t,1)[0];return o(e)}))}function Tt(t,e){var r=S((function(){return[]}));return Nt(t,(function(){r.length=0;for(var n=t.length,o=0;o<n;o++)r[o]=t[o].get();return e(r)}))}function Lt(t,e,r){r.set(t&&e?t/e:0)}function Ht(){return{xOffset:window.pageXOffset,yOffset:window.pageYOffset,xMaxOffset:document.body.clientWidth-window.innerWidth,yMaxOffset:document.body.clientHeight-window.innerHeight}}var Ut=!1;function Vt(){Ut=!0;var t,e,r,n=(t=Ct,e=Ht,(r=function(){var r=e(),n=r.xOffset,o=r.yOffset,s=r.xMaxOffset,i=r.yMaxOffset;t.scrollX.set(n),t.scrollY.set(o),Lt(n,s,t.scrollXProgress),Lt(o,i,t.scrollYProgress)})(),r);_t(window,"scroll",n),_t(window,"resize",n)}function Yt(){return Ct||(Ct={scrollX:Rt(0),scrollY:Rt(0),scrollXProgress:Rt(0),scrollYProgress:Rt(0)}),O((function(){!Ut&&Vt()}),[]),Ct}t.FrameProvider=({children:t})=>{const[r,n]=e.useState(d);return e.useEffect((()=>{function t(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]),p(h.Provider,{value:r,children:t})},t.useFramedScrollMotion=function(t,e){const{scrollYProgress:r}=Yt(),[n,o]=g(t);return[n,kt(r,o,e)]},t.useRefViewportScroll=g,t.useViewportTransform=function(t,e){const{scrollYProgress:r}=Yt();return kt(r,t,e)},t.useWindowSize=m,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
